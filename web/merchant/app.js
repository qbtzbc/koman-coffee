App({ globalData: { token: null, merchantInfo: null }, onLaunch() { this.loadMerchantInfo(); }, loadMerchantInfo() { const token = wx.getStorageSync('merchant_token'); const merchantInfo = wx.getStorageSync('merchantInfo'); if (token && merchantInfo) { this.globalData.token = token; this.globalData.merchantInfo = merchantInfo; } }, saveMerchantInfo(token, merchantInfo) { this.globalData.token = token; this.globalData.merchantInfo = merchantInfo; wx.setStorageSync('merchant_token', token); wx.setStorageSync('merchantInfo', merchantInfo); }, clearMerchantInfo() { this.globalData.token = null; this.globalData.merchantInfo = null; wx.removeStorageSync('merchant_token'); wx.removeStorageSync('merchantInfo'); } });
