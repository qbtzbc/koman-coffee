# Koman Coffee - å¾®ä¿¡å°ç¨‹åºå’–å•¡ç‚¹å•ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºå¾®ä¿¡åŸç”Ÿå°ç¨‹åºå¼€å‘çš„å’–å•¡ç‚¹å•ç³»ç»Ÿ,æä¾›é¡¾å®¢ç«¯å’Œå•†å®¶ç«¯åŒç«¯åŠŸèƒ½ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„å’–å•¡åº—ç‚¹å•è§£å†³æ–¹æ¡ˆ,åŒ…å«:
- **é¡¾å®¢ç«¯å°ç¨‹åº**: æµè§ˆå•†å“ã€å®šåˆ¶å’–å•¡ã€ä¸‹å•æ”¯ä»˜ã€æŸ¥çœ‹è®¢å•
- **å•†å®¶ç«¯å°ç¨‹åº**: è®¢å•ç®¡ç†ã€å•†å“ç®¡ç†ã€æ•°æ®ç»Ÿè®¡
- **åç«¯æœåŠ¡**: Node.js + Express + MongoDB,æä¾›å®Œæ•´çš„ RESTful API

## ğŸš€ æŠ€æœ¯æ ˆ

### å‰ç«¯
- å¾®ä¿¡åŸç”Ÿå°ç¨‹åº (WXMLã€WXSSã€JavaScript)
- ç»„ä»¶åŒ–å¼€å‘
- æœ¬åœ°å­˜å‚¨ç®¡ç†

### åç«¯
- Node.js 14+
- Express 4.x
- MongoDB (Mongoose)
- JWT è®¤è¯
- Bcrypt å¯†ç åŠ å¯†

## ğŸ“ é¡¹ç›®ç»“æ„

```
koman-coffee/
â”œâ”€â”€ web/                    # å°ç¨‹åºå‰ç«¯
â”‚   â”œâ”€â”€ customer/          # é¡¾å®¢ç«¯å°ç¨‹åº
â”‚   â”‚   â”œâ”€â”€ pages/        # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/   # ç»„ä»¶
â”‚   â”‚   â””â”€â”€ utils/        # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ merchant/          # å•†å®¶ç«¯å°ç¨‹åº
â”‚       â”œâ”€â”€ pages/        # é¡µé¢
â”‚       â””â”€â”€ utils/        # å·¥å…·å‡½æ•°
â””â”€â”€ server/                # åç«¯æœåŠ¡
    â”œâ”€â”€ controllers/      # æ§åˆ¶å™¨
    â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
    â”œâ”€â”€ routes/          # è·¯ç”±
    â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
    â””â”€â”€ config/          # é…ç½®æ–‡ä»¶
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14.0.0
- MongoDB >= 4.4
- å¾®ä¿¡å¼€å‘è€…å·¥å…·

### åç«¯æœåŠ¡å®‰è£…

1. è¿›å…¥æœåŠ¡ç›®å½•
```bash
cd server
```

2. å®‰è£…ä¾èµ–
```bash
npm install
```

3. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶,é…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯:
```
NODE_ENV=development
PORT=3000
DB_HOST=localhost
DB_PORT=27017
DB_NAME=koman_coffee
JWT_SECRET=your_secret_key
```

4. å¯åŠ¨ MongoDB æ•°æ®åº“
```bash
mongod
```

5. å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

æœåŠ¡å°†åœ¨ http://localhost:3000 å¯åŠ¨

### å°ç¨‹åºé…ç½®

1. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€é¡¹ç›®
   - é¡¾å®¢ç«¯: `web/customer`
   - å•†å®¶ç«¯: `web/merchant`

2. ä¿®æ”¹ API åœ°å€
   - ç¼–è¾‘ `utils/request.js` ä¸­çš„ `API_BASE_URL`
   - å¼€å‘ç¯å¢ƒ: `http://localhost:3000/api`
   - ç”Ÿäº§ç¯å¢ƒ: ä¿®æ”¹ä¸ºå®é™…æœåŠ¡å™¨åœ°å€

3. é…ç½®å°ç¨‹åº AppID (åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°è·å–)

4. ç¼–è¯‘å¹¶è¿è¡Œ

## ğŸ’¾ æ•°æ®åº“åˆå§‹åŒ–

### åˆ›å»ºæµ‹è¯•å•†å®¶è´¦å·

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬åˆ›å»ºæµ‹è¯•å•†å®¶è´¦å·:

```javascript
// åœ¨ MongoDB shell æˆ–ä½¿ç”¨ Node.js è„šæœ¬
const Merchant = require('./server/models/Merchant');

Merchant.create({
  account: 'admin',
  password: 'admin123',  // ä¼šè‡ªåŠ¨åŠ å¯†
  shopName: 'Koman Coffee',
  phone: '13800138000',
  status: 'active'
});
```

### åˆ›å»ºæµ‹è¯•å•†å“

```javascript
const Product = require('./server/models/Product');

Product.create({
  name: 'ç¾å¼å’–å•¡',
  description: 'ç»å…¸ç¾å¼å’–å•¡,é¦™é†‡æµ“éƒ',
  category: 'ç¾å¼',
  images: ['https://via.placeholder.com/400'],
  price: { medium: 18, large: 22 },
  stock: 100,
  sales: 0,
  customOptions: [
    {
      type: 'size',
      name: 'å®¹é‡',
      options: [
        { value: 'medium', label: 'ä¸­æ¯', default: true },
        { value: 'large', label: 'å¤§æ¯' }
      ]
    },
    {
      type: 'temperature',
      name: 'æ¸©åº¦',
      options: [
        { value: 'hot', label: 'çƒ­', default: true },
        { value: 'ice', label: 'å†°' }
      ]
    },
    {
      type: 'sugar',
      name: 'ç³–åº¦',
      options: [
        { value: 'none', label: 'æ— ç³–' },
        { value: 'half', label: 'åŠç³–', default: true },
        { value: 'full', label: 'å…¨ç³–' }
      ]
    }
  ],
  status: 'active'
});
```

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½

### é¡¾å®¢ç«¯

- âœ… å•†å“æµè§ˆä¸åˆ†ç±»ç­›é€‰
- âœ… å•†å“è¯¦æƒ…ä¸å®šåˆ¶é€‰é¡¹
- âœ… è´­ç‰©è½¦ç®¡ç†
- âœ… è®¢å•åˆ›å»ºä¸æ”¯ä»˜(æ¨¡æ‹Ÿ)
- âœ… è®¢å•åˆ—è¡¨ä¸è¯¦æƒ…
- âœ… ç”¨æˆ·ç™»å½•(å¾®ä¿¡æˆæƒ)

### å•†å®¶ç«¯

- âœ… å•†å®¶ç™»å½•è®¤è¯
- âœ… è®¢å•ç®¡ç†(æ¥å•ã€å®Œæˆ)
- âœ… å•†å“ç®¡ç†(å¢åˆ æ”¹æŸ¥)
- âœ… æ•°æ®ç»Ÿè®¡(è®¢å•ã€è¥ä¸šé¢)

### åç«¯ API

- âœ… ç”¨æˆ·è®¤è¯ä¸æˆæƒ
- âœ… å•†å“ CRUD æ“ä½œ
- âœ… è®¢å•æµç¨‹ç®¡ç†
- âœ… åº“å­˜ç®¡ç†
- âœ… æ•°æ®ç»Ÿè®¡åˆ†æ

## ğŸ“± ä½¿ç”¨è¯´æ˜

### é¡¾å®¢ç«¯ä½¿ç”¨æµç¨‹

1. æ‰“å¼€é¡¾å®¢ç«¯å°ç¨‹åº
2. æµè§ˆå•†å“åˆ—è¡¨,é€‰æ‹©å¿ƒä»ªçš„å’–å•¡
3. è¿›å…¥å•†å“è¯¦æƒ…,é€‰æ‹©å®šåˆ¶é€‰é¡¹(å®¹é‡ã€æ¸©åº¦ã€ç³–åº¦)
4. åŠ å…¥è´­ç‰©è½¦æˆ–ç«‹å³è´­ä¹°
5. åœ¨è´­ç‰©è½¦ç¡®è®¤è®¢å•
6. ç‚¹å‡»ç»“ç®—åˆ›å»ºè®¢å•
7. æ¨¡æ‹Ÿæ”¯ä»˜åç­‰å¾…å•†å®¶æ¥å•
8. åœ¨è®¢å•åˆ—è¡¨æŸ¥çœ‹è®¢å•çŠ¶æ€

### å•†å®¶ç«¯ä½¿ç”¨æµç¨‹

1. ä½¿ç”¨å•†å®¶è´¦å·ç™»å½•
2. åœ¨é¦–é¡µæŸ¥çœ‹ä»Šæ—¥æ•°æ®æ¦‚è§ˆ
3. è¿›å…¥è®¢å•ç®¡ç†,æŸ¥çœ‹å¾…å¤„ç†è®¢å•
4. ç‚¹å‡»æ¥å•,å¼€å§‹åˆ¶ä½œ
5. å®Œæˆåˆ¶ä½œåç‚¹å‡»å®Œæˆè®¢å•
6. åœ¨å•†å“ç®¡ç†æ·»åŠ /ç¼–è¾‘å•†å“
7. æŸ¥çœ‹ç»Ÿè®¡æ•°æ®åˆ†æç»è¥æƒ…å†µ

## ğŸ” API æ¥å£æ–‡æ¡£

### ç”¨æˆ·ç›¸å…³

- `POST /api/user/login` - ç”¨æˆ·ç™»å½•
- `GET /api/user/info` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/user/info` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

### å•†å®¶ç›¸å…³

- `POST /api/merchant/login` - å•†å®¶ç™»å½•
- `GET /api/merchant/info` - è·å–å•†å®¶ä¿¡æ¯

### å•†å“ç›¸å…³

- `GET /api/products` - è·å–å•†å“åˆ—è¡¨
- `GET /api/products/:id` - è·å–å•†å“è¯¦æƒ…
- `POST /api/products` - åˆ›å»ºå•†å“(å•†å®¶)
- `PUT /api/products/:id` - æ›´æ–°å•†å“(å•†å®¶)
- `DELETE /api/products/:id` - åˆ é™¤å•†å“(å•†å®¶)

### è®¢å•ç›¸å…³

- `POST /api/orders` - åˆ›å»ºè®¢å•
- `GET /api/orders` - è·å–è®¢å•åˆ—è¡¨
- `GET /api/orders/:id` - è·å–è®¢å•è¯¦æƒ…
- `PUT /api/orders/:id/pay` - æ”¯ä»˜è®¢å•
- `PUT /api/orders/:id/accept` - å•†å®¶æ¥å•
- `PUT /api/orders/:id/complete` - å®Œæˆè®¢å•
- `PUT /api/orders/:id/cancel` - å–æ¶ˆè®¢å•

### ç»Ÿè®¡ç›¸å…³

- `GET /api/statistics/overview` - ç»Ÿè®¡æ¦‚è§ˆ
- `GET /api/statistics/sales` - é”€å”®ç»Ÿè®¡
- `GET /api/statistics/products` - å•†å“é”€å”®æ’è¡Œ

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
cd server
npm test
```

### æµ‹è¯•è´¦å·

- å•†å®¶è´¦å·: `admin` / `admin123`

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

- ä½¿ç”¨ ES6+ è¯­æ³•
- ç»„ä»¶å’Œå‡½æ•°ä½¿ç”¨é©¼å³°å‘½å
- æ–‡ä»¶åä½¿ç”¨ kebab-case
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š

### Git æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·å˜åŠ¨
```

## ğŸ”® åç»­è§„åˆ’

- [ ] æ¥å…¥å¾®ä¿¡æ”¯ä»˜
- [ ] ä¼˜æƒ åˆ¸ç³»ç»Ÿ
- [ ] ä¼šå‘˜ç§¯åˆ†
- [ ] å¤–å–é…é€
- [ ] å›¾ç‰‡ CDN
- [ ] æ•°æ®ç¼“å­˜ä¼˜åŒ–
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜,è¯·æäº¤ Issue æˆ–è”ç³»å¼€å‘è€…ã€‚

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨,å•†ç”¨è¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚